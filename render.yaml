# File: render.yaml
# Defines the services for the entire application, including the static site
# and the backend API, and ensures correct routing for the frontend.

# Static Site Configuration (Frontend)
services:
- type: static
  name: codeareana-app
  buildCommand: "npm install && npm run build"
  staticPublishPath: client/dist
  envVars:
    - key: NODE_VERSION
      value: "18.17.1"
  # CRITICAL: Routing rule for React Router (SPA) Fallback
  routes:
    - type: rewrite
      source: /
      destination: /index.html